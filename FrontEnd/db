DROP DATABASE IF EXISTS Pos;
CREATE DATABASE IF NOT EXISTS Pos;

USE Pos;

DROP TABLE IF EXISTS Customer;

CREATE TABLE IF NOT EXISTS Customer(
	customerId VARCHAR(45) NOT NULL,
	customerName VARCHAR(25) NOT NULL,
	Gender VARCHAR(10),
	contact VARCHAR(15),
	NIC VARCHAR(15) ,
	address TEXT,
	email VARCHAR(20),
	CONSTRAINT PRIMARY KEY(customerId),
	CONSTRAINT UNIQUE KEY(NIC)
);

SHOW TABLES;
DESC Customer;

DROP TABLE IF EXISTS Item;

CREATE TABLE IF NOT EXISTS Item(
	itemCode VARCHAR(45) NOT NULL,
	kind VARCHAR(25) NOT NULL,
	itemName VARCHAR(25) NOT NULL,
	qtyOnHand INT,
	unitPrice DOUBLE DEFAULT 0.00,
	CONSTRAINT PRIMARY KEY(itemCode)
);

SHOW TABLES;
DESC Item;

DROP TABLE IF EXISTS `Order`;

CREATE TABLE IF NOT EXISTS `Order`(
	orderId VARCHAR(45),
	cusId VARCHAR(45),
	orderDate VARCHAR(10),
	grossTotal DOUBLE DEFAULT 0.00,
	netTotal DOUBLE DEFAULT 0.00,
	CONSTRAINT PRIMARY KEY(orderId),
	CONSTRAINT FOREIGN KEY(cusId) REFERENCES Customer(customerId)
		ON DELETE CASCADE ON UPDATE CASCADE

);

SHOW TABLES;
DESC `Order`;

DROP TABLE IF EXISTS `Order Detail`;

CREATE TABLE IF NOT EXISTS `Order Detail`(
	oId VARCHAR(45),
	itemId VARCHAR(45),
	itemKind VARCHAR(25),
	itemName VARCHAR(25),
	sellQty INT,
	unitPrice DOUBLE DEFAULT 0.00,
	itemDiscount INT,
	total DOUBLE DEFAULT 0.00,
	CONSTRAINT PRIMARY KEY(oId,itemId),
	CONSTRAINT FOREIGN KEY(oId) REFERENCES `Order`(orderId)
		ON DELETE CASCADE ON UPDATE CASCADE,
	CONSTRAINT FOREIGN KEY(itemId) REFERENCES Item(itemCode)
		ON DELETE CASCADE ON UPDATE CASCADE

);

SHOW TABLES;
DESC `Order Detail`;

